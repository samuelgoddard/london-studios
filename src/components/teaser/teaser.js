import React from "react"
import PropTypes from "prop-types"
import { Link } from "gatsby"
import Img from "gatsby-image"

class Teaser extends React.Component {
  render() {
    const color = { color: this.props.color };
    return (
      <Link className="m-teaser block relative" to={`/locations/${this.props.slug}`}>
        
        { !this.props.active && (
          <div className="absolute top-0 right-0 w-1/5 sm:w-1/6 md:w-1/4 lg:w-1/5 xl:w-1/6 z-10 mt-5 mr-5">
            <svg className="w-full rotating" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 132 132"><path fill="#FFF" d="M29.084 113.458c1.388-3.624 4.861-5.142 8.111-3.897 3.362 1.288 4.473 4.09 3.538 7.202l-1.598-.526c.7-2.217-.041-4.364-2.47-5.294-2.39-.916-4.81.256-5.918 3.151-1.11 2.895-.092 5.384 2.298 6.3 2.428.93 4.414-.173 5.375-2.29l1.54.676c-1.383 2.94-4.082 4.283-7.444 2.996-3.25-1.245-4.82-4.695-3.432-8.318zm42.442 9.907c.706 3.815-1.366 6.904-4.965 7.57-3.619.67-6.64-1.476-7.346-5.291-.706-3.815 1.347-6.9 4.965-7.57 3.6-.666 6.64 1.476 7.346 5.291zm-1.77.328c-.56-3.029-2.632-4.659-5.306-4.164-2.675.495-4.045 2.762-3.485 5.79.561 3.03 2.652 4.656 5.327 4.161 2.674-.495 4.025-2.759 3.464-5.787zm31.177-3.353l-1.187.85-9.418-6.587-.066.046 6.313 8.812-1.316.944-7.338-10.243 2.26-1.619 8.852 6.279.05-.035-3.245-10.297 2.228-1.596 7.338 10.243-1.415 1.013-6.313-8.812-.065.047 3.322 10.955zm10.52-25.657l.574-1.643 11.894 4.159-.574 1.642-11.894-4.158zm7.506-21.447l8.614-8.144-9.55 1.308-.22-1.605 12.483-1.71.187 1.367-9.033 8.626 10.026-1.373.22 1.605-12.483 1.71-.244-1.784zm4.01-39.146c2.24 2.768 1.825 6.422-1.222 8.887-3.016 2.441-6.77 2.031-8.959-.674-2.24-2.768-1.996-5.614.369-7.811l1.122 1.228c-1.7 1.555-1.95 3.662-.353 5.636 1.623 2.006 4.292 2.188 6.717.225 2.425-1.962 2.776-4.613 1.065-6.728-1.485-1.834-3.591-2.085-5.409-.897l2.416 2.985-1.057.856-3.41-4.214 4.835-3.913.994 1.229-1.741 1.409c1.596-.571 3.4.259 4.633 1.782zM79.724 5.252l-1.554.168c-.2-2.293-1.83-3.403-3.948-3.311-1.878.082-3.022.933-2.962 2.311.05 1.16.834 1.685 2.487 1.934l2.518.37c1.874.279 3.197 1.222 3.282 3.18.096 2.198-1.577 3.773-4.335 3.893-3.157.138-5.048-1.462-5.192-4.298l1.575-.149c.15 2.076 1.461 3.2 3.54 3.109 1.817-.08 2.799-.983 2.738-2.382-.054-1.238-.89-1.602-2.362-1.818l-2.297-.34c-2.317-.34-3.52-1.288-3.607-3.307C69.506 2.295 71.445.87 74.163.75c3.097-.135 5.429 1.465 5.561 4.502zm-41.143 9.439c-2.118-3.251-1.392-6.9 1.675-8.897 3.083-2.009 6.697-1.188 8.815 2.062 2.118 3.251 1.408 6.889-1.675 8.897-3.067 1.998-6.698 1.189-8.815-2.062zm1.508-.983c1.681 2.58 4.22 3.29 6.499 1.805s2.673-4.104.991-6.685c-1.68-2.58-4.236-3.279-6.515-1.794-2.28 1.485-2.656 4.093-.975 6.674zm-24.233 22.97c-3.513-1.647-4.818-5.13-3.264-8.444 1.562-3.332 5.066-4.54 8.579-2.892 3.513 1.647 4.826 5.112 3.264 8.444-1.554 3.314-5.066 4.539-8.579 2.892zm.764-1.63c2.79 1.308 5.32.573 6.475-1.89 1.155-2.463.11-4.897-2.68-6.204-2.788-1.308-5.328-.555-6.483 1.908-1.154 2.463-.1 4.879 2.688 6.186zm-3.464 21.59l-8.86 7.876 9.586-1.015.17 1.61-12.53 1.327-.144-1.372 9.293-8.345L.607 57.785l-.17-1.611 12.53-1.327.189 1.79z"/></svg>
          </div>
        )}

        <div className="w-full max-h-64 overflow-hidden">
          <Img
            fluid={this.props.image}
            className={this.props.active ? `m-teaser__img is--active` : `m-teaser__img`}
          />
        </div>

        <span className="block m-teaser__title h2 relative z-10">{this.props.titlePrefix}</span>
        <h2 style={color} className={`block mb-0 leading-none mb-2 lg:mb-4`}>{this.props.title}</h2>

        { this.props.meta && (
          <span className="block m-teaser__meta">{this.props.meta}</span>
        )}
      </Link>
    );
  }
}

Teaser.defaultProps = {
  slug: ``,
  title: ``,
  titlePrefix: ``,
  color: ``,
  image: {},
  meta: ``,
  active: true,
  disabled: true,
}

Teaser.propTypes = {
  slug: PropTypes.string.isRequired,
  title: PropTypes.string.isRequired,
  titlePrefix: PropTypes.string,
  color: PropTypes.string,
  image: PropTypes.object.isRequired,
  meta: PropTypes.string,
  active: PropTypes.bool,
  disabled: PropTypes.bool,
}

export default Teaser
